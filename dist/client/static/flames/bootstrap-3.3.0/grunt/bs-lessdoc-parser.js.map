{"version":3,"sources":["../../../../../../client/static/flames/bootstrap-3.3.0/grunt/bs-lessdoc-parser.js"],"names":["Remarkable","require","markdown2html","markdownString","md","render","trim","slice","CUSTOMIZABLE_HEADING","UNCUSTOMIZABLE_HEADING","SUBSECTION_HEADING","SECTION_DOCSTRING","VAR_ASSIGNMENT","VAR_DOCSTRING","Section","heading","customizable","id","replace","toLowerCase","docstring","subsections","prototype","addSubSection","subsection","push","SubSection","variables","addVar","variable","VarDocstring","html","SectionDocstring","Variable","name","defaultValue","Tokenizer","fileContent","_lines","split","_next","undefined","unshift","token","Error","_shift","result","length","line","shift","match","exec","commentStart","lastIndexOf","varLine","Parser","_tokenizer","parseFile","sections","section","parseSection","JSON","stringify","parseSubSections","parseSubSection","parseVars","parseVar","module","exports"],"mappings":"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","file":"bs-lessdoc-parser.js","sourcesContent":["/*!\n * Bootstrap Grunt task for parsing Less docstrings\n * http://getbootstrap.com\n * Copyright 2014 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n */\n'use strict';\n\nvar Remarkable = require('remarkable');\n\nfunction markdown2html(markdownString) {\n  var md = new Remarkable();\n\n  // the slice removes the <p>...</p> wrapper output by Markdown processor\n  return md.render(markdownString.trim()).slice(3, -5);\n}\n\n\n/*\nMini-language:\n  //== This is a normal heading, which starts a section. Sections group variables together.\n  //## Optional description for the heading\n\n  //=== This is a subheading.\n\n  //** Optional description for the following variable. You **can** use Markdown in descriptions to discuss `<html>` stuff.\n  @foo: #fff;\n\n  //-- This is a heading for a section whose variables shouldn't be customizable\n\n  All other lines are ignored completely.\n*/\n\n\nvar CUSTOMIZABLE_HEADING = /^[/]{2}={2}(.*)$/;\nvar UNCUSTOMIZABLE_HEADING = /^[/]{2}-{2}(.*)$/;\nvar SUBSECTION_HEADING = /^[/]{2}={3}(.*)$/;\nvar SECTION_DOCSTRING = /^[/]{2}#{2}(.+)$/;\nvar VAR_ASSIGNMENT = /^(@[a-zA-Z0-9_-]+):[ ]*([^ ;][^;]*);[ ]*$/;\nvar VAR_DOCSTRING = /^[/]{2}[*]{2}(.+)$/;\n\nfunction Section(heading, customizable) {\n  this.heading = heading.trim();\n  this.id = this.heading.replace(/\\s+/g, '-').toLowerCase();\n  this.customizable = customizable;\n  this.docstring = null;\n  this.subsections = [];\n}\n\nSection.prototype.addSubSection = function (subsection) {\n  this.subsections.push(subsection);\n};\n\nfunction SubSection(heading) {\n  this.heading = heading.trim();\n  this.id = this.heading.replace(/\\s+/g, '-').toLowerCase();\n  this.variables = [];\n}\n\nSubSection.prototype.addVar = function (variable) {\n  this.variables.push(variable);\n};\n\nfunction VarDocstring(markdownString) {\n  this.html = markdown2html(markdownString);\n}\n\nfunction SectionDocstring(markdownString) {\n  this.html = markdown2html(markdownString);\n}\n\nfunction Variable(name, defaultValue) {\n  this.name = name;\n  this.defaultValue = defaultValue;\n  this.docstring = null;\n}\n\nfunction Tokenizer(fileContent) {\n  this._lines = fileContent.split('\\n');\n  this._next = undefined;\n}\n\nTokenizer.prototype.unshift = function (token) {\n  if (this._next !== undefined) {\n    throw new Error('Attempted to unshift twice!');\n  }\n  this._next = token;\n};\n\nTokenizer.prototype._shift = function () {\n  // returning null signals EOF\n  // returning undefined means the line was ignored\n  if (this._next !== undefined) {\n    var result = this._next;\n    this._next = undefined;\n    return result;\n  }\n  if (this._lines.length <= 0) {\n    return null;\n  }\n  var line = this._lines.shift();\n  var match = null;\n  match = SUBSECTION_HEADING.exec(line);\n  if (match !== null) {\n    return new SubSection(match[1]);\n  }\n  match = CUSTOMIZABLE_HEADING.exec(line);\n  if (match !== null) {\n    return new Section(match[1], true);\n  }\n  match = UNCUSTOMIZABLE_HEADING.exec(line);\n  if (match !== null) {\n    return new Section(match[1], false);\n  }\n  match = SECTION_DOCSTRING.exec(line);\n  if (match !== null) {\n    return new SectionDocstring(match[1]);\n  }\n  match = VAR_DOCSTRING.exec(line);\n  if (match !== null) {\n    return new VarDocstring(match[1]);\n  }\n  var commentStart = line.lastIndexOf('//');\n  var varLine = (commentStart === -1) ? line : line.slice(0, commentStart);\n  match = VAR_ASSIGNMENT.exec(varLine);\n  if (match !== null) {\n    return new Variable(match[1], match[2]);\n  }\n  return undefined;\n};\n\nTokenizer.prototype.shift = function () {\n  while (true) {\n    var result = this._shift();\n    if (result === undefined) {\n      continue;\n    }\n    return result;\n  }\n};\n\nfunction Parser(fileContent) {\n  this._tokenizer = new Tokenizer(fileContent);\n}\n\nParser.prototype.parseFile = function () {\n  var sections = [];\n  while (true) {\n    var section = this.parseSection();\n    if (section === null) {\n      if (this._tokenizer.shift() !== null) {\n        throw new Error('Unexpected unparsed section of file remains!');\n      }\n      return sections;\n    }\n    sections.push(section);\n  }\n};\n\nParser.prototype.parseSection = function () {\n  var section = this._tokenizer.shift();\n  if (section === null) {\n    return null;\n  }\n  if (!(section instanceof Section)) {\n    throw new Error('Expected section heading; got: ' + JSON.stringify(section));\n  }\n  var docstring = this._tokenizer.shift();\n  if (docstring instanceof SectionDocstring) {\n    section.docstring = docstring;\n  }\n  else {\n    this._tokenizer.unshift(docstring);\n  }\n  this.parseSubSections(section);\n\n  return section;\n};\n\nParser.prototype.parseSubSections = function (section) {\n  while (true) {\n    var subsection = this.parseSubSection();\n    if (subsection === null) {\n      if (section.subsections.length === 0) {\n        // Presume an implicit initial subsection\n        subsection = new SubSection('');\n        this.parseVars(subsection);\n      }\n      else {\n        break;\n      }\n    }\n    section.addSubSection(subsection);\n  }\n\n  if (section.subsections.length === 1 && !(section.subsections[0].heading) && section.subsections[0].variables.length === 0) {\n    // Ignore lone empty implicit subsection\n    section.subsections = [];\n  }\n};\n\nParser.prototype.parseSubSection = function () {\n  var subsection = this._tokenizer.shift();\n  if (subsection instanceof SubSection) {\n    this.parseVars(subsection);\n    return subsection;\n  }\n  this._tokenizer.unshift(subsection);\n  return null;\n};\n\nParser.prototype.parseVars = function (subsection) {\n  while (true) {\n    var variable = this.parseVar();\n    if (variable === null) {\n      return;\n    }\n    subsection.addVar(variable);\n  }\n};\n\nParser.prototype.parseVar = function () {\n  var docstring = this._tokenizer.shift();\n  if (!(docstring instanceof VarDocstring)) {\n    this._tokenizer.unshift(docstring);\n    docstring = null;\n  }\n  var variable = this._tokenizer.shift();\n  if (variable instanceof Variable) {\n    variable.docstring = docstring;\n    return variable;\n  }\n  this._tokenizer.unshift(variable);\n  return null;\n};\n\n\nmodule.exports = Parser;\n"]}